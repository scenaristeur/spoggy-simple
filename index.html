<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Spoggy-simple | Edition | Import / Export</title>

  <!--Vendor LIBS -->
  <script type="text/javascript" src="./dist/eve.custom.js"></script>
  <script type="text/javascript" src="./dist/rdflib.min.js"></script> <!-- pour import ttl local -->
  <!--  <script type="text/javascript" src="./dist/solid-auth-client.bundle.js"></script> -->
  <script type="text/javascript" src="./dist/solid-file-client.bundle.js"></script>

  <!-- Agents-->
  <script type="text/javascript" src="./agents/HistoriqueAgent.js"></script>
  <script type="text/javascript" src="./agents/AppAgent.js"></script>
    <script type="text/javascript" src="./agents/RdfAgent.js"></script>
  <script type="text/javascript" src="./agents/AuthAgent.js"></script>
  <script type="text/javascript" src="./agents/FileAgent.js"></script>

  <!-- Graph Vis -->
  <link href="./dist/vis-network.min.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="./dist/vis-network.min.js"></script>
  <script type="text/javascript" src="./js/network.js"></script>

  <!-- Spoggy -->
  <link href="./css/main.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="./js/import-export.js"></script>
  <script type="text/javascript" src="./js/spoggy.js"></script>
  <script type="text/javascript" src="./js/solid.js"></script>
</head>

<body onload="init();initSpoggy();">
  <h2>Créez  un graphe en éditant les noeuds et les liens</h2>
  <div id="node-popUp" class="popUp">
    <span id="node-operation">node</span> <br>
    <table style="margin:auto;">
      <tr style="display:none">
        <td>id</td><td><input id="node-id" value="" /></td>
      </tr>
      <tr>
        <td>Nom du noeud</td><td><input id="node-label" autofocus /></td>
      </tr>
    </table>
    <label for="node-shape">Forme:</label>
    <select id="node-shape">
      <optgroup label="Label interne">
        <option>ellipse</option>
        <option>circle</option>
        <option>database</option>
        <option>box</option>
        <option>text</option>
      </optgroup>
      <optgroup label="Label externe">
        <option>image</option>
        <option>circularImage</option>
        <option>diamond</option>
        <option>dot</option>
        <option>star</option>
        <option>triangle</option>
        <option>triangleDown</option>
        <option>hexagon</option>
        <option>square</option>
        <option>icon</option>
      </optgroup>
      <input style="display:none" id="node-image-url" value="" />
    </select>
    <input type="button" value="save" id="node-saveButton" />
    <input type="button" value="cancel" id="node-cancelButton" />
  </div>

  <div id="edge-popUp" class="popUp">
    <span id="edge-operation">edge</span> <br>
    <table style="margin:auto;">
      <tr>
        <td>label</td><td><input id="edge-label" /></td>
      </tr></table>
      <input type="button" value="save" id="edge-saveButton" />
      <input type="button" value="cancel" id="edge-cancelButton" />
    </div>

    <div id="import-popUp" class="popUp">
      <div style="padding-left:20px" vertical start-justified start layout wrap>
        <h2 id="importOperation" style="margin: 0;color: #0D578B;">Import JSON (ou ttl) <paper-icon-button icon="clear" dialog-dismiss></paper-icon-button></h2>
        <p >
          <fieldset>
            <legend>Paramètres</legend>
            <input type="checkbox" id="remplaceNetwork" name="remplaceNetwork">Remplacer Network</input>
            <!--<input type="checkbox" id="partageImport"  name="partageImport"disabled >Partager Import</input>-->
          </fieldset>
        </p>
        <p>
          <fieldset>
            <legend>Fichier</legend>
            <input id="filepicker" type="file" multiple value="Importer" onchange="handleFileSelected(this, updateGraph)"></input>
          </fieldset>
          <fieldset>
            <legend>Url / POD</legend>
            <!--  <input id="filepicker" type="file" multiple value="Importer" on-change="handleFileSelected"></input>-->
            <input id="importUrl" Label="Url / POD"></input>
            <button onclick="importFromUrl()">Importer</button>
          </fieldset>
        </p>
      </div>

      <input type="button" value="Fermer" onclick="(function(){ document.getElementById('import-popUp').style.display = 'none'; })();"/>
    </div>

    <div style="float:left" id="mynetwork"></div>

    <div style="float:left">
      <fieldset>
        <legend>Input</legend>
        <input id="input" style="width:70%" onkeyup="inputChanged(this)" type="text"></input>
        <button id="valider" onclick="validInput()">Valider</button><br>
        <br>
        <input type="color" id="bodycolorpicker" name="bodycolorpicker" value="#D2E5FF"> <label for="bodycolorpicker">Body</label>
        <input type="color" id="bordercolorpicker" name="bordercolorpicker" value="#2B7CE9"><label for="bordercolorpicker">Contour</label>
        <!-- transparence https://gist.github.com/lopspower/03fb1cc0ac9f32ef38f4 -->
        <input type="checkbox" id="autofocus" name="autofocus" checked><label for="autofocus">AutoFocus</label>
        <input type="checkbox" id="autofit" name="autofit" ><label for="autofit">Autofit</label>
        <br>
        Ajouter un triplet : 3 mots suivis d'un point ou virgule ou point-virgule ou tiret et 'Validez' <br>
        ou lancez un commande commançant par '/' (/n = nouveau, /e = export, /i = import...)<br>
        ou importer une url (json, ttl, rdf, POD...)<br>
      </fieldset>
    </div>


    <div style="float:auto">
      <fieldset>
        <legend>Outils</legend>
        <button id="exporter_ttl" onclick="catchCommande({value:'/n'})">Nouveau Graphe</button> /n
        <button id="importer_btn" onclick="catchCommande({value:'/i'})">Importer</button> /i
        <button id="exporter_json" onclick="catchCommande({value:'/e'})">Exporter JSON</button> /e
        <button id="exporter_ttl" onclick="catchCommande({value:'/t'})">Exporter Ttl</button> /t
      </fieldset>
    </div>

    <div style="float:auto">
      <fieldset>
        <legend>Exemples JSON OK</legend>
        <a href="?source=https://raw.githubusercontent.com/scenaristeur/heroku-spoggy/master/public/exemple_files/DavidProjets_spoggy_nodes_edges_1511453311975.json">Projets David</a><br><br>
        <a href="?source=https://raw.githubusercontent.com/scenaristeur/heroku-spoggy/master/public/exemple_files/Barriere%20Lego.json">Barrière LEGO sur github</a><br><br>
        <a href="?source=https://smag0.solid.community/public/spoggy/Graph_Couleurs_Martin.json">Graph_Couleurs_Martin, JSON sur POD public smag0</a><br><br>
        <a href="?source=https://raw.githubusercontent.com/scenaristeur/heroku-spoggy/master/public/exemple_files/Spoggy-Donner%20du%20sens%20%C3%A0%20l'IA.json">Donner du sens à l'IA</a><br><br>
      </fieldset>
      <fieldset>
        <legend>Exemples POD en developpement</legend>
        <a href="?source=https://smag0.solid.community/profile/card#me">Explorer un POD (smag0) : firends,  public (& prive si auth)</a><br>
        <a href="?source=https://holacratie.solid.community/profile/card#me">Et Parcourir les Friends (holacratie)</a><br>
        <a href="?source=https://raw.githubusercontent.com/scenaristeur/heroku-spoggy/master/public/exemple_files/DavidProjets.ttl"> David Projets TTL sur Github</a><br>
        <a href="?source=https://smag0.solid.community/public/spoggy/Spoggy-caracteristiques.ttl">Spoggy-caracteristiques.ttl sur POD public smag0</a><br>
        <a href="?source=https://smag0.solid.community/public/">POD public smag0</a><br><br>
        todo :
        urls Persee, urls Semantic Forms...  Parcourir pour importer un ttl, rdf
        <a href="https://github.com/scenaristeur/heroku-spoggy/tree/master/public/exemple_files" target="_blank">exemples de fichiers spoggy </a>
      </fieldset>
    </div>


    <div style="float:auto">
      <fieldset>
        <legend>LOGIN</legend>
        <button id="login-btn" onclick="login()">Login</button>
        <button id="logout-btn" onclick="logout()">Logout</button>
        <button id="profile-btn" onclick="profile()">Profile</button>
        <button id="friends-btn" onclick="friends()">Friends</button>
        <div id="webId"></div>
        <div id="current-webId"></div>

      </fieldset>
    </div>

    <div style="float:auto">
      <fieldset>
        <legend>Réglages</legend>
        <button  onclick="resetColors()">retablir les couleurs</button>
        <select id="locale" onchange="draw();">
          <option value="en">en</option>
          <option value="de">de</option>
          <option value="es">es</option>
          <!--<option value="fr">fr</option>-->
          <option value="it">it</option>
          <option value="nl">nl</option>
          <option value="pt-br">pt</option>
          <option value="ru">ru</option>
        </select>
      </fieldset>
    </div>

    <div style="float:auto">
      <fieldset>
        <legend>Console</legend>
        <textarea id="story" name="story" rows="5" cols="66">
          It was a dark and stormy night...
        </textarea>
      </fieldset>
    </div>

    <div style="float:auto">
      <fieldset>
        <legend>Editeur</legend>
        <pre id="editor"></pre>
      </fieldset>
      <!-- load ace -->

    </div>

    <script>
    // create agents
    var historiqueAgent = new HistoriqueAgent('historiqueAgent');
    var appAgent = new AppAgent('appAgent');
    var rdfAgent = new RdfAgent('rdfAgent');
  //  var authAgent = new AuthAgent('authAgent');
    var fileAgent = new FileAgent('fileAgent');

    historiqueAgent.send('historiqueAgent', 'Prêt!');
    appAgent.send('historiqueAgent', 'Prêt!');
    rdfAgent.send('historiqueAgent', 'Prêt!');
    fileAgent.send('historiqueAgent', 'Prêt!');
    //authAgent.send('historiqueAgent', 'Prêt!');
    </script>

    <footer>
      en savoir plus ? <a href="https://github.com/scenaristeur/spoggy-simple" target="_blank">spoggy-simple</a>
    </footer>
  </body>
  </html>
  <script src="./dist/ace-builds/src-min-noconflict/ace.js"></script>
  <!-- load ace language tools -->
  <script src="./dist/ace-builds/src-min-noconflict/snippets/turtle.js"></script>
  <script>
  //https://ace.c9.io/#nav=api&api=editor
  var editor = ace.edit("editor", {
    theme: "ace/theme/tomorrow_night_eighties",
    mode: "ace/mode/turtle",
    maxLines: 30,
    wrap: true,
    autoScrollEditorIntoView: true
  });


  //editor.insert("test")
  </script>
