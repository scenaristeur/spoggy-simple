<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Spoggy-simple | Edition | Import / Export</title>

  <!--Vendor LIBS -->
  <script type="text/javascript" src="./dist/eve.custom.js"></script>
  <script type="text/javascript" src="./dist/rdflib.min.js"></script>
  <script type="text/javascript" src="./dist/solid-auth-client.bundle.js"></script>
  <script type="text/javascript" src="./dist/solid-file-client.bundle.js"></script>

  <!--<script type="text/javascript" src="../exampleUtil.js"></script>-->

  <!-- Agents-->
  <script type="text/javascript" src="./agents/HistoriqueAgent.js"></script>
  <script type="text/javascript" src="./agents/AppAgent.js"></script>
  <script type="text/javascript" src="./agents/RdfAgent.js"></script>
  <script type="text/javascript" src="./agents/AuthAgent.js"></script>
  <script type="text/javascript" src="./agents/FileAgent.js"></script>




  <script type="text/javascript" src="./dist/vis-network.min.js"></script>
  <link href="./dist/vis-network.min.css" rel="stylesheet" type="text/css" />
  <link href="./css/main.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="./js/import-export.js"></script>
  <script type="text/javascript" src="./js/network.js"></script>
  <script type="text/javascript" src="./js/spoggy.js"></script>

  <!--
  <script type="text/javascript" src="./services/rectangle.js"></script>

  <script type="text/javascript" src="./services/rdf.service.js"></script>
  <script type="text/javascript" src="./services/solid.auth.service.js"></script>
  <script type="text/javascript" src="./services/solid.fileClient.service.js"></script>-->

</head>

<body onload="init();initSpoggy();">
  <h2>Créez  un graphe en éditant les noeuds et les liens</h2>

  <select id="locale" onchange="draw();">
    <option value="en">en</option>
    <option value="de">de</option>
    <option value="es">es</option>
    <option value="fr">fr</option>
    <option value="it">it</option>
    <option value="nl">nl</option>
    <option value="pt-br">pt</option>
    <option value="ru">ru</option>
  </select>


  <div id="node-popUp" class="popUp">
    <span id="node-operation">node</span> <br>
    <table style="margin:auto;">
      <tr style="display:none">
        <td>id</td><td><input id="node-id" value="" /></td>
      </tr>
      <tr>
        <td>label</td><td><input id="node-label" value="" /></td>
      </tr>
    </table>
    <label for="node-shape">Forme:</label>
    <select id="node-shape">
      <optgroup label="Label interne">
        <option>ellipse</option>
        <option>circle</option>
        <option>database</option>
        <option>box</option>
        <option>text</option>
      </optgroup>
      <optgroup label="Label externe">
        <option>image</option>
        <option>circularImage</option>
        <option>diamond</option>
        <option>dot</option>
        <option>star</option>
        <option>triangle</option>
        <option>triangleDown</option>
        <option>hexagon</option>
        <option>square</option>
        <option>icon</option>
      </optgroup>
      <input style="display:none" id="node-image-url" value="" />
    </select>
    <input type="button" value="save" id="node-saveButton" />
    <input type="button" value="cancel" id="node-cancelButton" />
  </div>

  <div id="edge-popUp" class="popUp">
    <span id="edge-operation">edge</span> <br>
    <table style="margin:auto;">
      <tr>
        <td>label</td><td><input id="edge-label" value="new value" /></td>
      </tr></table>
      <input type="button" value="save" id="edge-saveButton" />
      <input type="button" value="cancel" id="edge-cancelButton" />
    </div>

    <div id="import-popUp" class="popUp">
      <!--<span id="import-operation">Import</span> <br>
      <table style="margin:auto;">
      <tr>
      <td>label</td><td><input id="import-label" value="new value" /></td>
    </tr></table>-->
    <div style="padding-left:20px" vertical start-justified start layout wrap>
      <h2 id="importOperation" style="margin: 0;color: #0D578B;">Import JSON (ou ttl) <paper-icon-button icon="clear" dialog-dismiss></paper-icon-button></h2>

      <p >
        <fieldset>
          <legend>Paramètres</legend>
          <input type="checkbox" id="remplaceNetwork" name="remplaceNetwork">Remplacer Network</input>
          <!--<input type="checkbox" id="partageImport"  name="partageImport"disabled >Partager Import</input>-->
        </fieldset>
      </p>
      <p>
        <fieldset>
          <legend>Fichier</legend>
          <input id="filepicker" type="file" multiple value="Importer" onchange="handleFileSelected(this, updateGraph)"></input>
        </fieldset>
        <fieldset>
          <legend>Url / POD</legend>
          <!--  <input id="filepicker" type="file" multiple value="Importer" on-change="handleFileSelected"></input>-->
          <input id="importUrl" Label="Url / POD"></input>
          <button onclick="importFromUrl()">Importer</button>
        </fieldset>
      </p>
      <!--<div style="padding-top:10px" horizontal end-justified layout self-stretch>
      <paper-button id="importCancelButton" dialog-dismiss raised>Annuler</paper-button>
      <a href="https://github.com/scenaristeur/heroku-spoggy/tree/master/public/exemple_files" target="_blank"> exemples de fichiers spoggy </a>
    </div>-->
  </div>

  <input type="button" value="Fermer"
  onclick="(function(){ document.getElementById('import-popUp').style.display = 'none'; })();"/>
  <!--<input type="button" value="cancel" id="import-cancelButton" />-->

</div>

<br />




<div style="float:left" id="mynetwork"></div>
<div style="float:left">
  <div>
    <fieldset>
      <legend>Input</legend>

      <input id="input" style="width:70%" onkeyup="inputChanged(this)" type="text"></input>
      <button id="valider" onclick="validInput()">Valider</button><br>

      <br>

      <input type="color" id="bodycolorpicker" name="bodycolorpicker" value="#D2E5FF"> <label for="bodycolorpicker">Body</label>
      <input type="color" id="bordercolorpicker" name="bordercolorpicker" value="#2B7CE9"><label for="bordercolorpicker">Contour</label>

      <!-- transparence https://gist.github.com/lopspower/03fb1cc0ac9f32ef38f4 -->
      <input type="checkbox" id="autofocus" name="autofocus" checked><label for="autofocus">AutoFocus</label>
      <input type="checkbox" id="autofit" name="autofit" ><label for="autofit">Autofit</label>

      <br>
      Ajouter un triplet : 3 mots suivis d'un point ou virgule ou point-virgule ou tiret et 'Validez' <br>
      ou lancez un commande commançant par '/' (/n = nouveau, /e = export, /i = import...)<br>
      ou importer une url (json, ttl, rdf, POD...)<br>
    </fieldset>
  </div>
</div>


<div style="float:auto">
  <fieldset>
    <legend>Outils</legend>
    <button id="exporter_ttl" onclick="catchCommande({value:'/n'})">Nouveau Graphe</button> /n
    <button id="importer_btn" onclick="catchCommande({value:'/i'})">Importer</button> /i
    <button id="exporter_json" onclick="catchCommande({value:'/e'})">Exporter JSON</button> /e
    <button id="exporter_ttl" onclick="catchCommande({value:'/t'})">Exporter Ttl</button> /t
  </fieldset>
</div>

<div style="float:auto">
  <fieldset>
    <legend>Exemples JSON OK</legend>
    <a href="?source=https://raw.githubusercontent.com/scenaristeur/heroku-spoggy/master/public/exemple_files/DavidProjets_spoggy_nodes_edges_1511453311975.json">Projets David</a><br><br>
    <a href="?source=https://raw.githubusercontent.com/scenaristeur/heroku-spoggy/master/public/exemple_files/Barriere%20Lego.json">Barrière LEGO sur github</a><br><br>
    <a href="?source=https://smag0.solid.community/public/spoggy/Graph_Couleurs_Martin.json">Graph_Couleurs_Martin, JSON sur POD public smag0</a><br><br>
    <a href="?source=https://raw.githubusercontent.com/scenaristeur/heroku-spoggy/master/public/exemple_files/Spoggy-Donner%20du%20sens%20%C3%A0%20l'IA.json">Donner du sens à l'IA</a><br><br>
  </fieldset>
  <fieldset>
    <legend>Exemples POD en developpement</legend>
    <a href="?source=https://smag0.solid.community/profile/card#me">Explorer un POD (smag0) : firends,  public (& prive si auth)</a><br>
    <a href="?source=https://holacratie.solid.community/profile/card#me">Et Parcourir les Friends (holacratie)</a><br>
    <a href="?source=https://raw.githubusercontent.com/scenaristeur/heroku-spoggy/master/public/exemple_files/DavidProjets.ttl"> David Projets TTL sur Github</a><br>
    <a href="?source=https://smag0.solid.community/public/spoggy/Spoggy-caracteristiques.ttl">Spoggy-caracteristiques.ttl sur POD public smag0</a><br>
    <a href="?source=https://smag0.solid.community/public/">POD public smag0</a><br><br>
    todo :
    urls Persee, urls Semantic Forms... https://github.com/scenaristeur/heroku-spoggy/tree/master/public/exemple_files,
    Parcourir pour importer un ttl, rdf
  </fieldset>
</div>

<div style="float:auto">
  <fieldset>
    <legend>Réglages</legend>
    <button  onclick="resetColors()">retablir les couleurs</button>
  </fieldset>
</div>

<div style="float:auto">
  <fieldset>
    <legend>Console</legend>
    <textarea id="story" name="story" rows="5" cols="66">
It was a dark and stormy night...
</textarea>

  </fieldset>
</div>


<script>
console.log("RDF",$rdf)
const fileClient = SolidFileClient;
console.log("FC",fileClient)
/*const rdfService = new RdfService;
console.log(rdfService)*/
</script>
<script>

//console.log(new Rectangle(5,8).area());
//var authSession = new SolidAuthService();
//var res = authSession.getVal(5);
//console.log("SESSION",res)
</script>

<script>

// create two agents
var historiqueAgent = new HistoriqueAgent('historiqueAgent');
var appAgent = new AppAgent('appAgent');
var rdfAgent = new RdfAgent('rdfAgent');
var authAgent = new AuthAgent('authAgent');
var fileAgent = new FileAgent('fileAgent');

historiqueAgent.send('historiqueAgent', 'Ich bin ready!');
appAgent.send('historiqueAgent', 'Ich bin ready!');
rdfAgent.send('historiqueAgent', 'Ich bin ready!');
fileAgent.send('historiqueAgent', 'Ich bin ready!');
authAgent.send('historiqueAgent', 'Ich bin ready!');
</script>
</body>
</html>
